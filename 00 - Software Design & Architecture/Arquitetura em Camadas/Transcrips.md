# [Arquitetura De Software #1 - Arquitetura Em Camadas] (https://youtu.be/wEUwn-WFhKM?si=_Cx6hw24DdNSl7Xv)

00:00:00 Fala galera beleza bem esse é o primeiro vídeo aqui de uma série que eu tô iniciando no canal né chamada de é arquiteturas de software beleza e bem nessa primeira nessa nesse primeiro vídeo aqui dessa série A gente vai estar falando aí da arquitetura em camadas beleza Arquitetura em camadas beleza Ah que e eu tô decidindo trazer ela primeira porque talvez ela seja que você esteja mais familiar por conta que o próprio nest usa ela beleza a gente vai entender aqui bem É bem interessante tá bem simples também de entender não tem nada muito complexo

00:00:45 beleza e Vale ressaltar aqui beleza para você não confundir que o seguinte pessoal as outras arquiteturas elas também tem camadas porém elas não são a arquitetura em camada tá porque em camadas aqui é o nome da arquitetura então também tem a arquitetura lá hexagonal né que também tem camadas mas não é Arquitetura em camadas ela é a hexagonal tem a Clean Arc também né que é outra arquitetura que também tem camadas mas não é Arquitetura em camadas tá só para não ficar confuso aí beleza Porque de fato esse nome aqui confunde

00:01:27 eh Então vamos lá beleza bem a arquitetura em camadas pessoal ela tem basicamente três camadas tá é a a camada de apresentação apresentação tem a camada de e a camada de serviço beleza e a camada de e camada de acesso a dados acesso a dados beleza bem vamos entrar agora um pouco aqui em detalhes e em cada uma delas beleza é bem simples aqui não tem muito o que a gente falar o que acontece pessoal essa primeira camada aqui de apresentação né ela tá muito ligada aí é ainda na nossa cabeça né a interfaces gráficas a ui tá mas com a evolução das

00:02:17 aplicações né Por exemplo hoje você desenvolve uma API não tem ui né a ui tá em outra aplicação que vai consumir essa api né então eh apresentação né É É vamos dizer assim é um pouco outdated né um pouco passado a gente pensar só em Y né E aí eu gosto de pensar na camada de apresentação como a camada né de interação do cliente beleza e eu vou mostrar os exemplos aqui com no nest Beleza vai ficar bem é mais simples tá então a camada de apresentação é a camada ali mais externa que existe beleza que é onde justamente

00:03:00 o usuário ele vai o cliente né ele vai interagir com a aplicação e por interação eu digo gerar input e receber output né então imagine por exemplo aqui que na camada de aplicação seja de fato uma interface gráfica uma ui né então o que que o usuário faz num interface gráfica ele aperta sei lá um botão aí ele gera um input pro backend para um sistema né E aí ele recebe um output né E aí quando a aplicação recebe esse output ela atualiza a ui do usuário Né simples assim Beleza então a apresentação é a camada mais externa né

00:03:36 da arquitetura em camadas e ela é responsável aí pela interação do cliente né basicamente falando tá é ela que recebe os inputs e devolve o output beleza a camada de serviço ó ela é a camada né de e de regras de negócio beleza eu fico pensando em inglês e português aí fica confuso regras de negócio beleza E então a camada de serviço né é a camada que a gente que a responsabilidade dela é processar as regras de negócio beleza e aí nós temos a camada de acesso a dados né que o nome já é bem eh tipo é bem descritivo né E ela tem o

00:04:26 objetivo aí da gente persistir os dados né buscar persistir eh pegar os dados né enfim manipular os dados né manipular beleza manipular Beleza então galera essa arquitetura aqui é a arquitetura que o nest usa Beleza deixa eu ver se quebrar aqui fica interessante né acho que não mas beleza essa arquitetura aqui é a arquitetura que o nest usa Beleza então vamos ver agora aqui no nest eu tô nessa aplicação aqui nest né E aí se a gente perceber olha só que interessante ó a gente tem aqui no nosso Controller eu tô

00:05:08 nesse Controller aqui de autenticação que ele declara os end points baral bar register baral bar login né bem genérico aí nada demais beleza e aí galera o que acontece essa classe aqui né ela pertence à camada de apresentação né Por qu Você concorda comigo que aqui onde eu recebo os inputs do usuário e onde eu devolvo os input o onde eu devolvo né um output para ele uma saída para ele né É aqui né então é aqui onde a gente declara a nossa interface http né a gente declara o nosso contrato né a nossa interface http

00:05:52 E aí eu falo pro cliente assim ó cliente e você quer se comunicar comigo você quer se comunicar comigo você quer interagir comigo gerar input para mim então você vai ter que gerar esses inputs você vai ter que se comunicar comigo usando o protocolo http você vai ter que seguir esses end points aqui nesses verbos né cadê os verbos aqui nesses verbos você vai ter que passar esses valores que eu tô dizendo que você tem que passar no corpo ou no parâmetro né então aqui a gente define isso E aí se você fizer tudo

00:06:27 bonitinho aqui do jeito que eu tô falando você vai conseguir conversar comigo e aí eu vou te devolver um output uma saída né então a camada de apresentação né ela né pra gente tirar um pouco dessa questão da UI beleza da nossa cabeça aí que fica muito né Muito tem uma conotação muito forte aí pra pra camada de apresentação eh então bem a camada de serviço pessoal né aí o que acontece a gente tem aqui a camada de aplicação ou a camada de apresentação desculpa camada de apresentação né E aí o que acontece essa comunicação pessoal ela é sempre em uma

00:07:05 mão né Ela é unidirecional né então a camada de apresentação os componentes da camada de apresentação eles se comunicam ou com outros componentes da camada de aplicação desculpa desculpa os componentes da camada de apresentação eles se comunicam ou com os outros componentes que pertencem à camada de apresentação Ou eles se comunicam com eh com com uma camada mais interna com os componentes de uma camada mais interna no caso seria a camada de serviço aqui né que ela é responsável por pelas regras de negócio né Então

00:07:38 olha só essa classe aqui Ela depende de um serviço de um al service né E esse aice obviamente ele pertence à camada de serviço né tá bem explícito até no nome dele né que processa as regras de negócio então essa classe aqui que apresenta a que pertence a camada de aação ela se comunica com a com componente da camada de serviço né E aqui no serviço vai ter os as regras de negócio né os ifs vamos assim dizer né então e sei lá é aqui talvez nem seja regra de negócio ou seja né é difícil a gente às vezes aí distinguir mas sei lá onde vai ter a

00:08:17 maioria dos teus ifs vamos assim dizer né Sei lá o cara vai pagar uma parcela né ó paga a parcela aí sistema ele chama end ponte para pagar a parcela passa os dados E aí vai ter lá se a parcela tiver não tiver Venci ou se a parcela tiver vencida então aplique essa taxa de juros com base nessa quantidade de tempo blá BL blá BL BL blá né onde vai ter os ifs aí da tua aplicação né os fos vamos assim dizer né então aqui né camada de de serviço né E aí a camada de serviço né ela se comunica com uma camada de acesso a dados né no caso a nossa camada

00:08:56 aqui de acesso a dados ela tá simplesmente abstraída ao Prisma né o prisma ele fez a implementação dele lá ele é uma né tá numa na camada né de acesso a dados e ele tem lá a aplica e a implementação dele e Eu comunico com ele aqui ó injeto aqui no meu serviço né como a gente faz e uso aqui né a eh essa camada de acesso a dados beleza não é uma implementação Nossa implementação do Prisma E aí a camada aí é por responsabilidade dele vamos assim dizer né E aí pessoal uma coisa interessante aqui é que o seguinte ó

00:09:32 algo da camada da de apresentação um componente da camada de apresentação eles comunica né ele tem noção ele tem ciência ele sabe que existe o um componente da camada de serviço que é o al service e o al service ele sabe de de componentes da camada de acesso a dados né que no caso que é o prisma mas o contrário não é verdadeiro o meu serviço não sabe nada do Controller né e o o prisma não sabe nada do meu serviço da minha aplicação em geral né Ele é totalmente ali agnóstico né desacoplado ele não sabe de nada né E aí tá

00:10:15 percebendo essa esse fluxo de comunicação né Ele é é ele é apenas aí né unidirecional né só vai em uma direção né E aí Obviamente você tem os retornos né de cada método ali para retornar pro seu chamador né e assim eles vamos dizer assim eles se comunicam né eles conseguem fazer essa comunicação vamos dizer eh que vai e volta para ele né pro chamador beleza Ah então bem é é basicamente isso tá pessoal a camada é arquitetura é em camadas Beleza não tem muito segredo né E você percebe que ela é feita aqui com e ela é

00:10:59 usada aqui no nest né bem vou falar um pouquinho aqui tá assim dos problemas tá antes de falar eu quero deixar muito claro o seguinte pessoal essa arquitetura do nest ela é cara ela é excepcional você consegue desenvolver aplicações robustas escaláveis só com isso daqui velho né Às vezes você não precisa inventar roda isso daqui é muito suficiente velho quantas quantas startups aí conseguiram subir levantar suas aplicações a né a a quantidade de usuários incríveis e rodar liso cara só com isso daqui né e conseguir manter a

00:11:38 code base só com isso daqui né só com um jeito nest vamos assim dizer de se construir a aplicação né então às vezes a gente Reinventar a roda pensar em arquiteturas né mais complexas vamos assim dizer eh sabe pode ser que seja algo que você possa até pensar em descartar né porque não é o teu negócio não tem problemas tão complexos para precisar de outra arquitetura beleza mas o que acontece tá pessoal um dos downsides né Um dos problemas dessa arquitetura é que a camada de serviço Beleza o que acontece esse cara aqui as regras de negócio ela

00:12:17 é né os problemas do domínio né Elas são é elas são o coração né da nossa aplicação né Principalmente se você v do ângulo de um DDD né então e um software ele é feito para solucionar as regras de negócio né Você pode ter o banco de dados tinino que for a interface mais bonita que for enfim mas se não solucionar bem os problemas de negócio a gente pode dizer que é um software que não é bom né assim vamos vamos dizer e é muito difícil tá pessoal a gente fazer um software que é soluciona as regras de negócio Beleza então o que acontece o

00:12:54 problema aqui na na Arquitetura em camada né é que a a camada de serviço ela fica responsável por muito mais coisa do que apenas as regras de negócio né você percebe que as regras de negócio aqui elas estão acopladas né Eh a camada de serviço aqui ela tá responsável por fazer as persistências né fazer as operações no banco de dados eh ela tá responsável aqui por eh por manipular erros né Por gerenciar erros Ah e se der erro no banco de dados blá blá blá e se não sei o que que resposta eu dou pro cliente será que é

00:13:30 um 401 400 né aqui ó será que é conflito uma excessão de conflito um 49 e por aí vai né Então aqui tem muita responsabilidade para ela né ela não tá lidando só com a regra de negócio ela tá dando com vários problemas aqui Será que essas operações têm que ser transacionais ou não e sabe é muita responsabilidade para ela sendo que a camada que processa as regras de negócio ela deveria ser responsável né só por processar as regras de negócio né É por isso que se a gente for ver nas outras arquiteturas né o a camada que

00:14:07 processa a regr de negócio ela é colocada no centro ela fica aqui ó em vez dela ficar aqui no meio e ter outro cara para se comunicar ela fica deixa eu copiar tudo aqui n ela fica aqui no final ó que a camada né camada de domínio que a galera vai chamar né domínio por quê Porque ela não se comunica mais com ninguém né Ela tá no Core ali se você vê a Clean ar qualquer outra elas colocam as regras de negócio o domínio aqui no coração no final Para justamente ela não ter mais com quem se comunicar e ter só essa responsabilidade que é processar as

00:14:48 regras de negócio Beleza então bem esse basicamente pode ser um dos dos downsides tá aí é se você tiver trabalhando com com a com aplicação um software que tem uma uma regra de negócio muito muito difícil beleza e outra coisa que eu quero falar aqui também muito interessante para vocês pessoal é um negócio chamado aqui ó até do DDD tá que é chamado de Active Record tá eu não sei nem se eu se é interessante eu falar aqui mas eu acho que é tá muito ligado o que acontece o o DDD né Ele é um o DDD ele é é Ah vamos dizer assim ele

00:15:30 fornece pra gente várias várias maneiras de solucionar eh os problemas das regras de negócio os problemas né do domínio beleza e aí esses eh essas maneiras esses padrões que o DDD oferece são três e eles são chamados de padrões táticos beleza e aí é o ahã é o o é o transactional script o Active Record e o eh e o domain Model modelo de domínio Beleza então é o transactional script o Active Record e o domain Model o domain Model o DDD diz assim ó você vai usar o domain Model quando a regra de negócio ela for super

00:16:22 complexa se a regra de negócio for mais simples ou mediana se a regra de negócio for simples você pode usar o transaction script se for mediana você pode usar o Active Record o nest Aqui é do jeito que a gente tá fazendo aqui a gente tá usando o Active Record para solucionar nossas regras de negócio O que é o Active Record pessoal o Active Record ele é o seguinte tá ele é um padrão que é o seguinte um Active Record é uma classe né que ela representa um record record do inglês vem significa registro né então representa uma linha um registro

00:16:54 do banco de dados de uma tabela né do banco de dados e ele é ativo porque ele ele opera sobre esses dados ele tem eh né ele ele faz operações sobre esses dados que ele armazena né então se você perceber no que eu tô falando assim se você conseguir ligar isso nada mais é do que a implementação né do ORM né bem familiar né O que é um RM né Olha só o RM aqui se eu vir aqui no meu Prisma ó eu tenho a eu tenho aqui ó todos eu tenho classes aqui objetos que representam linhas né no meu banco de dados E aí eu posso fazer operações sobre essas linhas ó eu

00:17:41 posso encontrar uma eu posso deletar uma né então por isso que vem ativo né é um é uma é é ativo porque ela consegue fazer operações né não serve não é só uma classe que serve para armazenar os dados né mas também para operar em cima desses dados né então aqui eh você usa basicamente isso tá para solucionar o seu problema né no nest você vai est usando a camada e arquitetura em camada né E você vai est usando o Active Record né que são que é um padrão que os urms implementam né que é o que a gente explicou aí

00:18:20 beleza pessoal então B espero que vocês tenham gostado desse vídeo aqui ok se ficou alguma dúvidas deixa aí na descrição vai ter mais aqui dessa série beleza e abraço cara deixa o like se inscreve no canal aí beleza e até o próximo vídeo valeu